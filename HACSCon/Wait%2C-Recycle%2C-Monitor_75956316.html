<!DOCTYPE html>
<html>
    <head>
        <title>HACS200-Confluence : Wait, Recycle, Monitor</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">HACS200-Confluence</a></span>
                            </li>
                                                    <li>
                                <span><a href="HACS200-Confluence_131289.html">HACS200-Confluence</a></span>
                            </li>
                                                    <li>
                                <span><a href="Technical-Log_76021764.html">Technical Log</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            HACS200-Confluence : Wait, Recycle, Monitor
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Mani Pabba</span>, last modified on Oct 26, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong>10/18/20 </strong><a class="confluence-userlink user-mention current-user-mention" data-username="5f66448142547c007148d21e" data-account-id="5f66448142547c007148d21e" href="https://hacs200-1d.atlassian.net/wiki/people/5f66448142547c007148d21e?ref=confluence" target="_blank" data-linked-resource-id="1409025" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://hacs200-1d.atlassian.net/wiki">Mani Pabba</a> <a class="confluence-userlink user-mention" data-username="5f66457c0999c0007779d44b" data-account-id="5f66457c0999c0007779d44b" href="https://hacs200-1d.atlassian.net/wiki/people/5f66457c0999c0007779d44b?ref=confluence" target="_blank" data-linked-resource-id="196610" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://hacs200-1d.atlassian.net/wiki">Kaitlyn Yang</a> <a class="confluence-userlink user-mention" data-username="5f697baa06e34200710684a1" data-account-id="5f697baa06e34200710684a1" href="https://hacs200-1d.atlassian.net/wiki/people/5f697baa06e34200710684a1?ref=confluence" target="_blank" data-linked-resource-id="6914057" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://hacs200-1d.atlassian.net/wiki">Derek Mizushima</a> </p><ul><li><p>Modified wait, recycle, monitor scripts from last year to reflect changes in honeypot</p></li><li><p>TODO: Modify wait time in wait.sh script</p><ul><li><p><strong>warning: currently set at 30 seconds for testing purposes, change to 2 hours for deployment</strong></p></li></ul></li></ul><p><u>Recycle.sh</u></p><ul><li><p>Modified original recycle script: takes arguments &lt;ct_num&gt; &lt;mitm port number&gt; &lt;container ip&gt; &lt;mitm config file&gt;</p></li><li><p>Edits made so that it checks container number and changes ip table rules accordingly</p></li><li><p>To run: <code>nohup ./recycle.sh $ct_num $mitm_port $ct_ip mitm_c1.js &gt;&gt; /root/errlog$ct_num 2&gt;&amp;1 &amp;</code></p></li></ul><p><u>Wait.sh</u></p><ul><li><p>modify wait time to be 2 hours again</p></li><li><p>Commented out code to block attackers who entered once (we are allowing repeat attacks)</p></li></ul><p><u>Monitor.sh</u></p><ul><li><p>Note: running monitor2.sh not monitor.sh in the root system</p></li><li><p>To run: <code>tail -n 0 -F /var/lib/lxc/$ct_num/rootfs/var/log/auth.log | ~/monitor2.sh $ct_num &amp;</code></p></li><li><p>Similar edits to recycle made where container number is checked and IP changed accordingly</p></li></ul><p><u>Miscellaneous</u></p><ul><li><p>Added important iptable rules that are used once into a file and used @reboot within crontab to run iptables-save on system boot in case system powers off</p></li></ul>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Dec 07, 2020 15:47</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
